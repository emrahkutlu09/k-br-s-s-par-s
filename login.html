<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Giriş Yap</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: Arial; background: #f0f0f0; padding: 40px; }
    form { background: white; padding: 20px; border-radius: 8px; max-width: 350px; margin: auto; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    input { display: block; width: 100%; margin-bottom: 15px; padding: 10px; border-radius: 4px; border: 1px solid #ccc; }
    button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h2 style="text-align:center;">Giriş Yap</h2>
  <form id="girisFormu">
    <input type="email" id="email" placeholder="E-posta" required>
    <input type="password" id="sifre" placeholder="Şifre" required>
    <button type="submit">Giriş Yap</button>
  </form>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBCbKtD6jPE653IYwtTWo2fH93JXX4MN74",
      authDomain: "kibrissiparissistemi.firebaseapp.com",
      projectId: "kibrissiparissistemi",
      storageBucket: "kibrissiparissistemi.appspot.com",
      messagingSenderId: "263531733235",
      appId: "1:263531733235:web:82efdf39ed758a22465786"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById("girisFormu").addEventListener("submit", async function(e) {
      e.preventDefault();

      const email = document.getElementById("email").value;
      const sifre = document.getElementById("sifre").value;

      try {
        const query = await db.collection("uyeler")
          .where("email", "==", email)
          .where("sifre", "==", sifre)
          .get();

        if (!query.empty) {
          const userDoc = query.docs[0].data();
          const kullanici = {
            ad: userDoc.ad || "",
            soyad: userDoc.soyad || "",
            email: userDoc.email || ""
          };
          localStorage.setItem("kullanici", JSON.stringify(kullanici));
          alert("Giriş başarılı!");
          window.location.href = "index.html";
        } else {
          alert("E-posta veya şifre hatalı.");
        }
      } catch (error) {
        console.error("Giriş hatası:", error);
        alert("Hata: " + error.message);
      }
    });
  </script>
</body>
</html>
